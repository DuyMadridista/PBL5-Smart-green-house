import{g as L,r as E,j as w,z as ae,B as U,R as M,F as W,s as q,A as re,C as x,E as me,G as X,U as be,v as G,o as ee,k as Pe,w as V,b as K,H as oe,a as ge,c as ye,y as te,V as Se,T as he,K as le,l as $e}from"./entry.bedce686.js";import{I as Ee,u as we}from"./ui.config.07516773.js";import{u as ke}from"./usePopper.f6e400e4.js";import{_ as Oe}from"./_plugin-vue_export-helper.c27b6911.js";import{o as n,u as D,H as Y,t as N,N as ne,a as T}from"./dom.00f6aa02.js";import{m as Z,E as J,w as Be,h as Ie,P as C,N as I,T as R}from"./focus-management.d5172c5c.js";import{c as Fe,l as A,p as Me}from"./open-closed.3bb56ca1.js";import{b as Te}from"./use-resolve-button-type.fc40ffdb.js";import{y as Ce}from"./use-outside-click.798ba276.js";import{V as De,p as Ne,E as He,n as ue,d as F}from"./use-root-containers.e412349b.js";import{f as _,a as z}from"./hidden.c5dd51e6.js";import"./index.8c7f848a.js";import"./index.94805f97.js";var je=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(je||{});let se=Symbol("PopoverContext");function Q(e){let P=x(se,null);if(P===null){let y=new Error(`<${e} /> is missing a parent <${ve.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,Q),y}return P}let Ve=Symbol("PopoverGroupContext");function ie(){return x(Ve,null)}let pe=Symbol("PopoverPanelContext");function Ae(){return x(pe,null)}let ve=L({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:P,attrs:y,expose:k}){var t;let o=E(null);k({el:o,$el:o});let d=E(1),r=E(null),g=E(null),v=E(null),c=E(null),S=w(()=>Z(o)),O=w(()=>{var l,u;if(!n(r)||!n(c))return!1;for(let j of document.querySelectorAll("body > *"))if(Number(j?.contains(n(r)))^Number(j?.contains(n(c))))return!0;let p=J(),h=p.indexOf(n(r)),H=(h+p.length-1)%p.length,ce=(h+1)%p.length,de=p[H],fe=p[ce];return!((l=n(c))!=null&&l.contains(de))&&!((u=n(c))!=null&&u.contains(fe))}),s={popoverState:d,buttonId:E(null),panelId:E(null),panel:c,button:r,isPortalled:O,beforePanelSentinel:g,afterPanelSentinel:v,togglePopover(){d.value=D(d.value,{0:1,1:0})},closePopover(){d.value!==1&&(d.value=1)},close(l){s.closePopover();let u=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(s.button):n(s.button))();u?.focus()}};ae(se,s),Fe(w(()=>D(d.value,{0:A.Open,1:A.Closed})));let B={buttonId:s.buttonId,panelId:s.panelId,close(){s.closePopover()}},$=ie(),f=$?.registerPopover,[b,i]=De(),a=Ne({mainTreeNodeRef:$?.mainTreeNodeRef,portals:b,defaultContainers:[r,c]});function m(){var l,u,p,h;return(h=$?.isFocusWithinPopoverGroup())!=null?h:((l=S.value)==null?void 0:l.activeElement)&&(((u=n(r))==null?void 0:u.contains(S.value.activeElement))||((p=n(c))==null?void 0:p.contains(S.value.activeElement)))}return U(()=>f?.(B)),He((t=S.value)==null?void 0:t.defaultView,"focus",l=>{var u,p;l.target!==window&&l.target instanceof HTMLElement&&d.value===0&&(m()||r&&c&&(a.contains(l.target)||(u=n(s.beforePanelSentinel))!=null&&u.contains(l.target)||(p=n(s.afterPanelSentinel))!=null&&p.contains(l.target)||s.closePopover()))},!0),Ce(a.resolveContainers,(l,u)=>{var p;s.closePopover(),Be(u,Ie.Loose)||(l.preventDefault(),(p=n(r))==null||p.focus())},w(()=>d.value===0)),()=>{let l={open:d.value===0,close:s.close};return M(W,[M(i,{},()=>Y({theirProps:{...e,...y},ourProps:{ref:o},slot:l,slots:P,attrs:y,name:"Popover"})),M(a.MainTreeNode)])}}}),Le=L({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${N()}`}},inheritAttrs:!1,setup(e,{attrs:P,slots:y,expose:k}){let t=Q("PopoverButton"),o=w(()=>Z(t.button));k({el:t.button,$el:t.button}),q(()=>{t.buttonId.value=e.id}),re(()=>{t.buttonId.value=null});let d=ie(),r=d?.closeOthers,g=Ae(),v=w(()=>g===null?!1:g.value===t.panelId.value),c=E(null),S=`headlessui-focus-sentinel-${N()}`;v.value||U(()=>{t.button.value=c.value});let O=Te(w(()=>({as:e.as,type:P.type})),c);function s(a){var m,l,u,p,h;if(v.value){if(t.popoverState.value===1)return;switch(a.key){case T.Space:case T.Enter:a.preventDefault(),(l=(m=a.target).click)==null||l.call(m),t.closePopover(),(u=n(t.button))==null||u.focus();break}}else switch(a.key){case T.Space:case T.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&r?.(t.buttonId.value),t.togglePopover();break;case T.Escape:if(t.popoverState.value!==0)return r?.(t.buttonId.value);if(!n(t.button)||(p=o.value)!=null&&p.activeElement&&!((h=n(t.button))!=null&&h.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function B(a){v.value||a.key===T.Space&&a.preventDefault()}function $(a){var m,l;e.disabled||(v.value?(t.closePopover(),(m=n(t.button))==null||m.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&r?.(t.buttonId.value),t.togglePopover(),(l=n(t.button))==null||l.focus()))}function f(a){a.preventDefault(),a.stopPropagation()}let b=ue();function i(){let a=n(t.panel);if(!a)return;function m(){D(b.value,{[F.Forwards]:()=>C(a,I.First),[F.Backwards]:()=>C(a,I.Last)})===R.Error&&C(J().filter(l=>l.dataset.headlessuiFocusGuard!=="true"),D(b.value,{[F.Forwards]:I.Next,[F.Backwards]:I.Previous}),{relativeTo:n(t.button)})}m()}return()=>{let a=t.popoverState.value===0,m={open:a},{id:l,...u}=e,p=v.value?{ref:c,type:O.value,onKeydown:s,onClick:$}:{ref:c,id:l,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":n(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:s,onKeyup:B,onClick:$,onMousedown:f};return M(W,[Y({ourProps:p,theirProps:{...P,...u},slot:m,attrs:P,slots:y,name:"PopoverButton"}),a&&!v.value&&t.isPortalled.value&&M(_,{id:S,features:z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:i})])}}}),Ge=L({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${N()}`}},inheritAttrs:!1,setup(e,{attrs:P,slots:y,expose:k}){let{focus:t}=e,o=Q("PopoverPanel"),d=w(()=>Z(o.panel)),r=`headlessui-focus-sentinel-before-${N()}`,g=`headlessui-focus-sentinel-after-${N()}`;k({el:o.panel,$el:o.panel}),q(()=>{o.panelId.value=e.id}),re(()=>{o.panelId.value=null}),ae(pe,o.panelId),U(()=>{var f,b;if(!t||o.popoverState.value!==0||!o.panel)return;let i=(f=d.value)==null?void 0:f.activeElement;(b=n(o.panel))!=null&&b.contains(i)||C(n(o.panel),I.First)});let v=Me(),c=w(()=>v!==null?(v.value&A.Open)===A.Open:o.popoverState.value===0);function S(f){var b,i;switch(f.key){case T.Escape:if(o.popoverState.value!==0||!n(o.panel)||d.value&&!((b=n(o.panel))!=null&&b.contains(d.value.activeElement)))return;f.preventDefault(),f.stopPropagation(),o.closePopover(),(i=n(o.button))==null||i.focus();break}}function O(f){var b,i,a,m,l;let u=f.relatedTarget;u&&n(o.panel)&&((b=n(o.panel))!=null&&b.contains(u)||(o.closePopover(),((a=(i=n(o.beforePanelSentinel))==null?void 0:i.contains)!=null&&a.call(i,u)||(l=(m=n(o.afterPanelSentinel))==null?void 0:m.contains)!=null&&l.call(m,u))&&u.focus({preventScroll:!0})))}let s=ue();function B(){let f=n(o.panel);if(!f)return;function b(){D(s.value,{[F.Forwards]:()=>{var i;C(f,I.First)===R.Error&&((i=n(o.afterPanelSentinel))==null||i.focus())},[F.Backwards]:()=>{var i;(i=n(o.button))==null||i.focus({preventScroll:!0})}})}b()}function $(){let f=n(o.panel);if(!f)return;function b(){D(s.value,{[F.Forwards]:()=>{let i=n(o.button),a=n(o.panel);if(!i)return;let m=J(),l=m.indexOf(i),u=m.slice(0,l+1),p=[...m.slice(l+1),...u];for(let h of p.slice())if(h.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(h)){let H=p.indexOf(h);H!==-1&&p.splice(H,1)}C(p,I.First,{sorted:!1})},[F.Backwards]:()=>{var i;C(f,I.Previous)===R.Error&&((i=n(o.button))==null||i.focus())}})}b()}return()=>{let f={open:o.popoverState.value===0,close:o.close},{id:b,focus:i,...a}=e,m={ref:o.panel,id:b,onKeydown:S,onFocusout:t&&o.popoverState.value===0?O:void 0,tabIndex:-1};return Y({ourProps:m,theirProps:{...P,...a},attrs:P,slot:f,slots:{...y,default:(...l)=>{var u;return[M(W,[c.value&&o.isPortalled.value&&M(_,{id:r,ref:o.beforePanelSentinel,features:z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B}),(u=y.default)==null?void 0:u.call(y,...l),c.value&&o.isPortalled.value&&M(_,{id:g,ref:o.afterPanelSentinel,features:z.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:$})])]}},features:ne.RenderStrategy|ne.Static,visible:c.value,name:"PopoverPanel"})}}});const Ke=me(X.ui.strategy,X.ui.popover,Ee),Re=L({components:{HPopover:ve,HPopoverButton:Le,HPopoverPanel:Ge},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},popper:{type:Object,default:()=>({})},ui:{type:Object,default:void 0}},setup(e){const{ui:P,attrs:y}=we("popover",e.ui,Ke,{mergeWrapper:!0}),k=w(()=>be(e.mode==="hover"?{offsetDistance:0}:{},e.popper,P.value.popper)),[t,o]=ke(k.value),d=E(null),r=E(null);let g=null,v=null;q(()=>{const s=d.value?.$.provides;if(!s)return;const B=Object.getOwnPropertySymbols(s);r.value=B.length&&s[B[0]]});const c=w(()=>{const s=e.popper?.offsetDistance||P.value.popper?.offsetDistance||8;return e.mode==="hover"?{paddingTop:`${s}px`,paddingBottom:`${s}px`}:{}});function S(){e.mode!=="hover"||!r.value||(v&&(clearTimeout(v),v=null),r.value.popoverState!==0&&(g=g||setTimeout(()=>{r.value.togglePopover&&r.value.togglePopover(),g=null},e.openDelay)))}function O(){e.mode!=="hover"||!r.value||(g&&(clearTimeout(g),g=null),r.value.popoverState!==1&&(v=v||setTimeout(()=>{r.value.closePopover&&r.value.closePopover(),v=null},e.closeDelay)))}return{ui:P,attrs:y,popover:d,trigger:t,container:o,containerStyle:c,onMouseOver:S,onMouseLeave:O}}}),_e=["disabled"];function ze(e,P,y,k,t,o){const d=G("HPopoverButton"),r=G("HPopoverPanel"),g=G("HPopover");return ee(),Pe(g,le({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:V(({open:v,close:c})=>[K(d,{ref:"trigger",as:"div",disabled:e.disabled,class:"inline-flex w-full",role:"button",onMouseover:e.onMouseOver},{default:V(()=>[oe(e.$slots,"default",{open:v,close:c},()=>[ge("button",{disabled:e.disabled}," Open ",8,_e)])]),_:2},1032,["disabled","onMouseover"]),v?(ee(),ye("div",{key:0,ref:"container",class:te([e.ui.container,e.ui.width]),style:Se(e.containerStyle),onMouseover:P[0]||(P[0]=(...S)=>e.onMouseOver&&e.onMouseOver(...S))},[K(he,le({appear:""},e.ui.transition),{default:V(()=>[K(r,{class:te([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:V(()=>[oe(e.$slots,"panel",{open:v,close:c})]),_:2},1032,["class"])]),_:2},1040)],38)):$e("",!0)]),_:3},16,["class","onMouseleave"])}const no=Oe(Re,[["render",ze]]);export{no as default};
