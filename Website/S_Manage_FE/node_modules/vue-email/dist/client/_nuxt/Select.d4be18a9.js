import W from"./Icon.abde8ead.js";import{E as J,G as m,g as K,j as n,N as c,o,c as d,a as Q,F as A,x as N,t as O,K as R,y as v,H as B,b as j,l as p}from"./entry.bedce686.js";import{t as X}from"./tw-merge.d13a1e91.js";import{s as Y,u as Z,i as f}from"./ui.config.07516773.js";import{u as _}from"./useFormGroup.eb72ac79.js";import{_ as x}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.94805f97.js";const u=J(m.ui.strategy,m.ui.select,Y),ee=K({components:{UIcon:W},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>u.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>u.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:()=>u.default.size,validator(e){return Object.keys(u.size).includes(e)}},color:{type:String,default:()=>u.default.color,validator(e){return[...m.ui.colors,...Object.keys(u.color)].includes(e)}},variant:{type:String,default:()=>u.default.variant,validator(e){return[...Object.keys(u.variant),...Object.values(u.color).flatMap(r=>Object.keys(r))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},ui:{type:Object,default:void 0}},emits:["update:modelValue","change"],setup(e,{emit:r,slots:y}){const{ui:a,attrs:C}=Z("select",e.ui,u,{mergeWrapper:!0}),{emitFormChange:z,formGroup:g}=_(e),t=n(()=>g?.error?.value?"red":e.color),i=n(()=>g?.size?.value??e.size),s=g?.labelFor,I=l=>{r("update:modelValue",l.target.value)},w=l=>{z(),r("change",l)},F=l=>f(l,e.valueAttribute,f(l,e.optionAttribute)),q=l=>f(l,e.optionAttribute,f(l,e.valueAttribute)),S=l=>["string","number","boolean"].includes(typeof l)?{[e.valueAttribute]:l,[e.optionAttribute]:l}:{...l,[e.valueAttribute]:F(l),[e.optionAttribute]:q(l)},h=n(()=>e.options.map(l=>S(l))),$=n(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...h.value]:h.value),G=n(()=>{const l=S(e.modelValue),k=$.value.find(H=>H[e.valueAttribute]===l[e.valueAttribute]);return k?k[e.valueAttribute]:""}),L=n(()=>{const l=a.value.color?.[t.value]?.[e.variant]||a.value.variant[e.variant];return X(c(a.value.base,a.value.rounded,a.value.size[i.value],e.padded?a.value.padding[i.value]:"p-0",l?.replaceAll("{color}",t.value),(b.value||y.leading)&&a.value.leading.padding[i.value],(V.value||y.trailing)&&a.value.trailing.padding[i.value]),e.selectClass)}),b=n(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),V=n(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),M=n(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),P=n(()=>e.loading&&!b.value?e.loadingIcon:e.trailingIcon||e.icon),T=n(()=>c(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[i.value])),U=n(()=>c(a.value.icon.base,m.ui.colors.includes(t.value)&&a.value.icon.color.replaceAll("{color}",t.value),a.value.icon.size[i.value],e.loading&&"animate-spin")),E=n(()=>c(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[i.value])),D=n(()=>c(a.value.icon.base,m.ui.colors.includes(t.value)&&a.value.icon.color.replaceAll("{color}",t.value),a.value.icon.size[i.value],e.loading&&!b.value&&"animate-spin"));return{ui:a,attrs:C,id:s,normalizedOptionsWithPlaceholder:$,normalizedValue:G,isLeading:b,isTrailing:V,selectClass:L,leadingIconName:M,leadingIconClass:U,leadingWrapperIconClass:T,trailingIconName:P,trailingIconClass:D,trailingWrapperIconClass:E,onInput:I,onChange:w}}}),ae=["id","name","value","required","disabled"],le=["value","label"],te=["value","selected","disabled","textContent"],ne=["value","selected","disabled","textContent"];function ie(e,r,y,a,C,z){const g=W;return o(),d("div",{class:v(e.ui.wrapper)},[Q("select",R({id:e.id,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled||e.loading,class:["form-select",e.selectClass]},e.attrs,{onInput:r[0]||(r[0]=(...t)=>e.onInput&&e.onInput(...t)),onChange:r[1]||(r[1]=(...t)=>e.onChange&&e.onChange(...t))}),[(o(!0),d(A,null,N(e.normalizedOptionsWithPlaceholder,(t,i)=>(o(),d(A,null,[t.children?(o(),d("optgroup",{key:`${t[e.valueAttribute]}-optgroup-${i}`,value:t[e.valueAttribute],label:t[e.optionAttribute]},[(o(!0),d(A,null,N(t.children,(s,I)=>(o(),d("option",{key:`${s[e.valueAttribute]}-${i}-${I}`,value:s[e.valueAttribute],selected:s[e.valueAttribute]===e.normalizedValue,disabled:s.disabled,textContent:O(s[e.optionAttribute])},null,8,te))),128))],8,le)):(o(),d("option",{key:`${t[e.valueAttribute]}-${i}`,value:t[e.valueAttribute],selected:t[e.valueAttribute]===e.normalizedValue,disabled:t.disabled,textContent:O(t[e.optionAttribute])},null,8,ne))],64))),256))],16,ae),e.isLeading&&e.leadingIconName||e.$slots.leading?(o(),d("span",{key:0,class:v(e.leadingWrapperIconClass)},[B(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[j(g,{name:e.leadingIconName,class:v(e.leadingIconClass)},null,8,["name","class"])])],2)):p("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(o(),d("span",{key:1,class:v(e.trailingWrapperIconClass)},[B(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[j(g,{name:e.trailingIconName,class:v(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):p("",!0)],2)}const ve=x(ee,[["render",ie]]);export{ve as default};
